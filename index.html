<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Bookmarklets</title>
	<link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css">
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<header>
		<h1>Bookmarklets</h1>
	</header>

	<main>

		<details>
			<summary>Index</summary>
			<p>Drag these to your bookmarks toolbar</p>
			<ul id="index-list"></ul>
		</details>

		<blockquote>
			<strong>What do bookmarklets do?</strong>
			<p>
				A bookmarklet is a "one-click" tool which adds functionality to the
				browser, such as modifying the appearance of a web page, querying a
				search engine with search terms provided by previously selected text,
				or submitting the current page to a translation or blogging service.
			</p>

			<cite>
				- <a data-content="href" href="https://support.mozilla.org/en-US/kb/bookmarklets-perform-common-web-page-tasks"></a>
			</cite>
		</blockquote>


		<h3><a data-src="js/hello.js">Hello World</a></h3>
		<p>
			Click the link above to try it out!
		</p>
		<p>
			Drag the link into your bookmarks bar to save it, then you'll be able to run it on any website.
		</p>

		<h3><a data-src="js/confetti.js">Confetti</a></h3>
		<p>
			Throws some confetti.
		</p>

		<h3><a data-src="js/highlight-duplicate-ids.js">Highlight Duplicate Ids</a></h3>
		<p>
			Highlights elements with the same id. Also logs them to the DevTools console.
		</p>
		<p>
			These two elements have the same id: <strong id="dup">First</strong> <em id="dup">Second</em>
		</p>

		<h3><a data-src="js/show-passwords.js">Show Passwords</a></h3>
		<p>
			Displays the contents of password fields. Run again to hide them back.
		</p>
		<p>
			<input type="password" value="hunter2">
		</p>

		<h3><a data-src="js/gitlab-merge-requests.js">GitLab Merge Requests</a></h3>
		<p>
			Lists merge requests for your starred projects.
		</p>
		<p>
			Must be used in the <a href="https://gitlab.com/dashboard/merge_requests">Merge Requests</a> page.
		</p>

		<h3><a data-src="js/copy-cognito-access-token.js">Copy AWS Cognito Access Token</a></h3>
		<p>
			Copies to the clipboard the Cognito access token used by the current page.
		</p>

		<!--
		<h3><a data-src="js/.js"></a></h3>
		<p>

		</p>
		-->

	</main>

	<script>
		const indexList = document.querySelector('#index-list');

		document.querySelectorAll('a[data-src]').forEach(async anchor => {
			const src = anchor.getAttribute('data-src');
			const script = await fetch(src).then(res => res.text());
			anchor.href = script;

			const listItem = document.createElement('li');
			listItem.append(anchor.cloneNode(true));
			indexList.append(listItem);
		});

		document.querySelectorAll('[data-content]').forEach(element => {
			const attribute = element.getAttribute('data-content');
			const content = element.getAttribute(attribute);
			element.textContent = content;
		});
	</script>
</body>
</html>
